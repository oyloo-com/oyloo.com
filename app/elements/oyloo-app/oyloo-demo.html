<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/firebase-element/firebase-collection.html">
<link rel="import" href="../../bower_components/firebase-element/firebase-document.html">
<link rel="import" href="oyloo-list.html">

<dom-module id="oyloo-demo">
  <template>
    <firebase-document location="[[_documentLocation]]" data="{{doc}}"></firebase-document>
    <firebase-collection location="[[_computeLocation(_documentLocation, 'l')]]" data="{{lists}}"></firebase-collection>
    <template is="dom-repeat" items="[[lists]]" as="list">
      <oyloo-list base="[[base]]" path="[[list.__firebaseKey__]]">
    </template>
    <!--<oyloo-pretty-json object='[[list]]'></oyloo-pretty-json>-->
  </template>
  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'oyloo-demo',
        properties: {
          base: String,
          path: String,
          _documentLocation: {
            type: String,
            computed: '_computeLocation(base, path)'
          },
          title: {
            type: String,
            notify: true,
            value: 'Leanest Startup',
            computed: '_valueChanged(doc.t)'
          },
          name: {
            type: String,
            notify: true,
            value: 'Oyloo',
            computed: '_valueChanged(doc.n)'
          }
        },
        _computeLocation: function(base, path) {
          if (base && path) {
            return base + '/' + path;
          }
        },
        _valueChanged: function(value) {
          return value;
        }
      });
    })();
  </script>
</dom-module>
